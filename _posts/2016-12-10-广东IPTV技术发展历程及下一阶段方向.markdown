---
layout:     post
title:      "广东IPTV技术发展历程及下一阶段方向"
subtitle:   "IPTV技术演进思考"
date:       2016-11-20
author:     "zfshao"
header-img: "img/post-bg-green.jpeg"
header-mask: 0.3
catalog:    true
tags:
    - IPTV
    - 技术发展
    - 原创
---

本文简要回顾广东IPTV发展历程，思考下个阶段IPTV规模发展的技术方向。

广东电信推出了IPTV业务已有近10年时间，IPTV业务发展至今已近` 700万用户 `。10年坎坷路走过三个阶段，而今迎来发展新阶段：
![4Steps](/img/IptvEnv/4Steps.png)

### 第一阶段，2007年至2008年，起点
在第一阶段，我们把IPTV业务搭建起来了，开始试点发展用户，也走在全国的前列（当时福建IPTV在国内发展最好）。在这个阶段，国内IPTV产业链刚起步，广电节目源、华为中兴UT等主要设备供应商的CDN平台和机顶盒解决方案，主要都是支持传统的[ MPEG4 ](https://en.wikipedia.org/wiki/MPEG-4)视频编解码技术，因此这个阶段使用的技术方案中，直播和VOD点播节目源采用了MPEG4编码技术，平台和承载网络采用基于TCP的单播模式，机顶盒采用裁剪的linux作为OS，只支持MPEG4解码。这种技术方案下，要在电视屏幕上相对清楚看节目，IPTV的标清节目的码率通常需要达到4Mbit/s的带宽，然而在2008年以前，普通宽带用户的带宽也就是2M/4M，显然这个条件很苛刻，难以大规模推广IPTV。这个起点阶段，攒机了` 20万 `体验用户，开始了广东IPTV探索之路。

### 第二阶段，2008年至2014年，小试阶段
本阶段，我们的IPTV用户规模发展到了` 300万 `。随着H264编码设备和支持H.264的机顶盒终端普及，在2008年下半年，我们启动了IPTV的改造升级，实现了IPTV视频编码从MPEG4升级为[ H.264 ](https://en.wikipedia.org/wiki/H.264/MPEG-4_AVC)。升级到了H.264后，同等视频质量的节目带宽消耗足足降低了50%，即原来标清节目的带宽需求从4M降低到了2M，这是个很振奋人心的结果，从平台的H.264改造开始，放号得到了较快的发展。然而，这个阶段，是最坎坷的阶段，一方面，国内IPTV政策原因，放号阻力一直都很大，毕竟电信也做电视业务威胁到了广电；另一方面，初具百万级规模的IPTV平台，但整个IPTV系统架构、CDN平台网络资源能力、容灾应急能力存在很多缺陷，平台稳定性很差，经常出现故障，CDN动不动就瘫痪，运维压力及大。例如，由于IPTV平台一直采用基于TCP的单播技术提供服务，整个CDN和承载网络资源越发难以支撑大规模用户并发服务，特别是在有热点、焦点电视直播节目时，比如2011年日本海啸、奥运会热门比赛、春晚直播、阅兵直播等，平台仍然很脆弱，经常瘫痪，影响大片业务。这这个阶段，我们无数次地组织设备供应商（华为）分析故障原因、讨论解优化案、开发新版本、升级割接，也投资建设了大量的高性能CDN设备，大范围的故障逐步收敛，平台逐步支撑百万级用户规模发展。（注：不得不说也正是在广东的反复试水，华为的IPTV产品也逐步推广到全球）

### 第三阶段，2014年2016，发展阶段
此阶段，我们的用户规模发展到了近` 700万 `。视频业务对CDN和网络带宽消耗很大，业界上视频类运营商很大的一部分投资也是花费在CDN和带宽租赁上。对于电信来说，带宽是自家的基础资源，刚开始用户规模小，采用点对点的单播技术能快速部署业务发展用户是重点，采用单播技术也没什么不妥，但随着IPTV用户大规模发展，IPTV视频对带宽和CDN资源消耗变得异常大，全省局部经常出现网络拥塞、无CDN可放号的矛盾，导致视频播放卡顿马赛克等现象。为解决这个矛盾，我们在2014年开展了全省CDN和承载网络的[ IPTV组播技术 ](https://en.wikipedia.org/wiki/Multicast)改造，至2015年初，组播改造完成后，直播频道在城域网三层网络上只需发布一路直播流、CDN服务器也只需占用一个连接，极大的节省了三层网络和CDN的带宽和计算资源，支撑了我们的IPTV用户规模发展到将近 700万 。

### 第四阶段，2017年，发展新阶段
在新的阶段，我们的用户目标规模是要超过` 1000万 `。第一阶段是IPTV业务的起点，实现了从无到有；在第二、三阶段，两项重大的技术应用，实现了我们IPTV用户的规模发展；当前来到了第四阶段，还有什么技术招式能提高CDN和带宽资源利用效能呢？当前在国内IPTV领域，国内包括百视通、CNTV、南传等内容提供商提供的绝大多数视频的编码格式仍是H.264，对标业界视频领域的发展，基于H.265的视频编码技术已有不少的应用场景，比如腾讯、PPS等都有H.265的应用专区，采用[ H.265 ](https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding)的视频编码，则同等视频质量的视频节目所需的带宽仅是H.264的50%、同时对CDN的计算资源、存储资源也将节约50%，因此是时候把IPTV的视频编码技术从H.264升级为H.265。升级为H.265，需要的改造点有：

+ SP头端视频编码器的升级或替换，升级到支持H.265编码。
+ CDN平台支持H.265技术（录制、流分发、流服务等）。
+ 机顶盒终端支持H2.65解码。

`在2016年，我们已经实现了CDN支持H.265技术，新入网的Android智能机顶盒也支持H.265解码，因此剩下的只需把视频源头端编码升级到H.265即可实现CDN计算存储资源和承载网络带宽资源的效能最大化利用，进一步支撑千万级用户规模发展。当然，现网还有很多存量的低端机顶盒不支持H.265解码，因此这部分机顶盒还要特别兼顾保留即有的H.264视频节目，同时，一定需要加快低端机顶盒的退网和更新换代才能跟上当下大视频业务发展趋势。`